/*!
 * C-Like Struct for JavaScript
 *
 * @author Joon Kyoung (aka. Firejune)
 * @license MIT
 * @version 0.1.2
 *
 */
(function(p,k){function l(a,c){for(var b in c)a.hasOwnProperty(b)&&(a[b]&&a[b].constructor===String&&(a[b]=[a[b],0]),a[b]&&a[b].constructor===Object?a[b]=l(a[b],c[b]):a[b][1]=c[b]);return a}function e(a,c){for(var b in a)a.hasOwnProperty(b)&&(a[b]&&a[b].constructor===Object?e(a[b],c):c(a[b],b))}function m(a,c,b){var f={},d;for(d in a)if(a.hasOwnProperty(d))if(a[d]&&a[d].constructor===Object)f[d]=m(a[d],c,b);else{var g=(a[d]&&a[d].constructor===Array?a[d][0]:a[d]).toLowerCase();f[d]=c["get"+(g.charAt(0).toUpperCase()+
g.slice(1))](b.offset,b.endian);b.offset+=h[g]}return f}function q(a){var c=0;e(a,function(a){a=(a&&a.constructor===String?a:a[0]).toLowerCase();c+=h[a]});return c}var h={int8:1,uint8:1,int16:2,uint16:2,int32:4,uint32:4,float32:4,float64:8},n=function(a,c,b){this.struct=a;this.defaultValue=c||0;this.byteLength=q(a);this.emptyBuffer=new ArrayBuffer(this.byteLength);this.endian=b==k?!0:b};n.prototype={read:function(a,c){var b;b=a instanceof DataView?a:new DataView(a);this.offset=c||0;return m(this.struct,
b,this)},write:function(a){var c=new DataView(this.emptyBuffer),b=this.defaultValue,f=this.endian,d=0;a!=k&&(this.struct=l(this.struct,a));e(this.struct,function(a){var e=(a&&a.constructor===String?a:a[0]).toLowerCase();a=a&&a.constructor===String?b:a[1];c["set"+(e.charAt(0).toUpperCase()+e.slice(1))](d,a,f);d+=h[e]});return c.buffer}};p.Struct=n})(window);